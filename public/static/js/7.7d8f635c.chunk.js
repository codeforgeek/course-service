(this["webpackJsonpcourse-generator-ui"]=this["webpackJsonpcourse-generator-ui"]||[]).push([[7],{266:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(124),c=n(260);t.a=function(e){var t=e.visible,n=e.onOk,a=e.onCancel,s=e.message;return r.a.createElement(o.a,{show:t,centered:!0,size:"lg",onHide:a},r.a.createElement(o.a.Body,null,r.a.createElement("div",{className:"pt-1"},s),r.a.createElement("div",{className:"pt-3 text-right"},r.a.createElement(c.a,{variant:"danger",className:"ml-2",onClick:n},"Yes"),r.a.createElement(c.a,{variant:"light",className:"ml-2",onClick:a},"No"))))}},276:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return r}));var a=function(){return"undefined"!==typeof window?window:e},r=function(){var e=a();return e&&e.tinymce?e.tinymce:null}}).call(this,n(52))},278:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var a=n(0),r=n(1),o=function(){return(o=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},c={onActivate:r.func,onAddUndo:r.func,onBeforeAddUndo:r.func,onBeforeExecCommand:r.func,onBeforeGetContent:r.func,onBeforeRenderUI:r.func,onBeforeSetContent:r.func,onBeforePaste:r.func,onBlur:r.func,onChange:r.func,onClearUndos:r.func,onClick:r.func,onContextMenu:r.func,onCopy:r.func,onCut:r.func,onDblclick:r.func,onDeactivate:r.func,onDirty:r.func,onDrag:r.func,onDragDrop:r.func,onDragEnd:r.func,onDragGesture:r.func,onDragOver:r.func,onDrop:r.func,onExecCommand:r.func,onFocus:r.func,onFocusIn:r.func,onFocusOut:r.func,onGetContent:r.func,onHide:r.func,onInit:r.func,onKeyDown:r.func,onKeyPress:r.func,onKeyUp:r.func,onLoadContent:r.func,onMouseDown:r.func,onMouseEnter:r.func,onMouseLeave:r.func,onMouseMove:r.func,onMouseOut:r.func,onMouseOver:r.func,onMouseUp:r.func,onNodeChange:r.func,onObjectResizeStart:r.func,onObjectResized:r.func,onObjectSelected:r.func,onPaste:r.func,onPostProcess:r.func,onPostRender:r.func,onPreProcess:r.func,onProgressState:r.func,onRedo:r.func,onRemove:r.func,onReset:r.func,onSaveContent:r.func,onSelectionChange:r.func,onSetAttrib:r.func,onSetContent:r.func,onShow:r.func,onSubmit:r.func,onUndo:r.func,onVisualAid:r.func},s=o({apiKey:r.string,id:r.string,inline:r.bool,init:r.object,initialValue:r.string,onEditorChange:r.func,outputFormat:r.oneOf(["html","text"]),value:r.string,tagName:r.string,cloudChannel:r.string,plugins:r.oneOfType([r.string,r.array]),toolbar:r.oneOfType([r.string,r.array]),disabled:r.bool,textareaName:r.string,tinymceScriptSrc:r.string},c),i=function(e){return"function"===typeof e},l=function(e){return e in c},m=function(e,t,n){(function(e){return Object.keys(e).filter(l).filter((function(t){return i(e[t])})).map((function(t){return{handler:e[t],eventName:t.substring(2)}}))})(t).forEach((function(t){var a=n[t.eventName];i(a)&&e.off(t.eventName,a);var r=function(n){return t.handler(n,e)};n[t.eventName]=r,e.on(t.eventName,r)}))},u=0,d=function(e){var t=(new Date).getTime();return e+"_"+Math.floor(1e9*Math.random())+ ++u+String(t)},p=function(e){return"undefined"===typeof e||""===e?[]:Array.isArray(e)?e:e.split(" ")},f=function(){return{listeners:[],scriptId:d("tiny-script"),scriptLoaded:!1}},b=function(){var e=f();return{load:function(t,n,a){e.scriptLoaded?a():(e.listeners.push(a),t.getElementById(e.scriptId)||function(e,t,n,a){var r=t.createElement("script");r.referrerPolicy="origin",r.type="application/javascript",r.id=e,r.src=n;r.addEventListener("load",(function e(){r.removeEventListener("load",e),a()})),t.head&&t.head.appendChild(r)}(e.scriptId,t,n,(function(){e.listeners.forEach((function(e){return e()})),e.scriptLoaded=!0})))},reinitialize:function(){e=f()}}}(),E=n(276),v=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),h=function(){return(h=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},g=function(e){function t(t){var n=e.call(this,t)||this;return n.handleEditorChange=function(e){var t=n.editor;if(t){var a=t.getContent({format:n.props.outputFormat});a!==n.currentContent&&(n.currentContent=a,i(n.props.onEditorChange)&&n.props.onEditorChange(n.currentContent,t))}},n.handleInit=function(e){var t=n.editor;t&&(t.setContent(n.getInitialValue()),i(n.props.onEditorChange)&&t.on("change keyup setcontent",n.handleEditorChange),i(n.props.onInit)&&n.props.onInit(e,t),m(t,n.props,n.boundHandlers))},n.initialise=function(){var e,t,a,r=h(h({},n.props.init),{target:n.elementRef.current,readonly:n.props.disabled,inline:n.inline,plugins:(e=n.props.init&&n.props.init.plugins,t=n.props.plugins,p(e).concat(p(t))),toolbar:n.props.toolbar||n.props.init&&n.props.init.toolbar,setup:function(e){n.editor=e,e.on("init",n.handleInit),n.props.init&&i(n.props.init.setup)&&n.props.init.setup(e)}});null!==(a=n.elementRef.current)&&"textarea"===a.tagName.toLowerCase()&&(n.elementRef.current.style.visibility=""),Object(E.a)().init(r)},n.id=n.props.id||d("tiny-react"),n.elementRef=a.createRef(),n.inline=n.props.inline?n.props.inline:n.props.init&&n.props.init.inline,n.boundHandlers={},n}return v(t,e),t.prototype.componentDidUpdate=function(e){this.editor&&this.editor.initialized&&(m(this.editor,this.props,this.boundHandlers),this.currentContent=this.currentContent||this.editor.getContent({format:this.props.outputFormat}),"string"===typeof this.props.value&&this.props.value!==e.value&&this.props.value!==this.currentContent&&this.editor.setContent(this.props.value),"boolean"===typeof this.props.disabled&&this.props.disabled!==e.disabled&&this.editor.setMode(this.props.disabled?"readonly":"design"))},t.prototype.componentDidMount=function(){null!==Object(E.a)()?this.initialise():this.elementRef.current&&this.elementRef.current.ownerDocument&&b.load(this.elementRef.current.ownerDocument,this.getScriptSrc(),this.initialise)},t.prototype.componentWillUnmount=function(){var e=this,t=this.editor;null!==Object(E.a)()&&t&&(t.off("init",this.handleInit),t.initialized&&(t.off("change keyup setcontent",this.handleEditorChange),Object.keys(this.boundHandlers).forEach((function(n){t.off(n,e.boundHandlers[n])})),this.boundHandlers={}),Object(E.a)().remove(t))},t.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},t.prototype.renderInline=function(){var e=this.props.tagName,t=void 0===e?"div":e;return a.createElement(t,{ref:this.elementRef,id:this.id})},t.prototype.renderIframe=function(){return a.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id})},t.prototype.getScriptSrc=function(){if("string"===typeof this.props.tinymceScriptSrc)return this.props.tinymceScriptSrc;var e=this.props.cloudChannel;return"https://cdn.tiny.cloud/1/"+(this.props.apiKey?this.props.apiKey:"no-api-key")+"/tinymce/"+e+"/tinymce.min.js"},t.prototype.getInitialValue=function(){return"string"===typeof this.props.value?this.props.value:"string"===typeof this.props.initialValue?this.props.initialValue:""},t.propTypes=s,t.defaultProps={cloudChannel:"5"},t}(a.Component)},288:function(e,t,n){},295:function(e,t,n){"use strict";n.r(t);var a=n(261),r=n(0),o=n.n(r),c=n(283),s=n(269),i=n(265),l=n(281),m=n(260),u=n(264),d=n(271),p=n(262),f=n(267),b=n(18),E=n(278),v=n(15),h=n(125);var g=function(e){var t=e.tinyMceApiKey,n=e.mode,c=e.lesson,s=e.onAdd,i=e.onUpdate,l=e.modules,g=Object(r.useState)("add"===n?{title:"",slug:"",excerpt:"",content:"",isPreviewEnabled:!1,lessonOrder:0}:Object(d.a)({},c)),y=Object(a.a)(g,2),N=y[0],C=y[1],O=function(e,t){if(t.stopPropagation(),e){var n=t.target.value;n!==N[e]&&C(Object(d.a)({},N,Object(u.a)({},e,n)))}},k=function(e){e.preventDefault(),"add"===n&&s(N),"update"===n&&i(N)};return o.a.createElement("div",{className:"lesson-form"},function(){var e=N.title,a=N.slug,r=N.excerpt,c=N.content,s=N.isPreviewEnabled,i=N.lessonOrder,g=N.sectionId;return o.a.createElement(f.a,{onSubmit:k},o.a.createElement(p.a,{className:"border-0"},o.a.createElement(p.a.Body,null,o.a.createElement("div",{className:"text-muted"},o.a.createElement("div",{className:"border-bottom mb-0 pb-3"},o.a.createElement("strong",{className:"d-block text-gray-dark"},o.a.createElement(b.a,{icon:v.b,className:"mr-2"}),"Title"),o.a.createElement(f.a.Group,{controlId:"title",className:"mb-0 mt-2"},o.a.createElement(f.a.Control,{type:"text",value:e||"",placeholder:"Enter title",onChange:function(e){return O("title",e)},required:!0})))),o.a.createElement("div",{className:"text-muted pt-3"},o.a.createElement("div",{className:"border-bottom mb-0 pb-3"},o.a.createElement("strong",{className:"d-block text-gray-dark"},o.a.createElement(b.a,{icon:v.h,className:"mr-2"}),"Module"),o.a.createElement(f.a.Group,{controlId:"sectionId",className:"mb-0 mt-2"},o.a.createElement(f.a.Control,{as:"select",value:g,onChange:function(e){return O("sectionId",e)},custom:!0},l.map((function(e){return o.a.createElement("option",{key:e.id,value:e.id},e.name)})))))),o.a.createElement("div",{className:"text-muted pt-3"},o.a.createElement("div",{className:"border-bottom mb-0 pb-3"},o.a.createElement("strong",{className:"d-block text-gray-dark"},o.a.createElement(b.a,{icon:v.o,className:"mr-2"}),"Lesson Order"),o.a.createElement(f.a.Group,{controlId:"lessonOrder",className:"mb-0 mt-2"},o.a.createElement(f.a.Control,{type:"number",value:i||"",placeholder:"Enter order",onChange:function(e){return O("lessonOrder",e)},required:!0})))),o.a.createElement("div",{className:"text-muted pt-3"},o.a.createElement("div",{className:"border-bottom mb-0 pb-3"},o.a.createElement("strong",{className:"d-block text-gray-dark"},o.a.createElement(b.a,{icon:v.w,className:"mr-2"}),"Slug"),o.a.createElement(f.a.Group,{controlId:"slug",className:"mb-0 mt-2"},o.a.createElement(f.a.Control,{type:"text",value:a||"",placeholder:"Enter slug",onChange:function(e){return O("slug",e)},required:!0})))),o.a.createElement("div",{className:"text-muted pt-3"},o.a.createElement("div",{className:"border-bottom mb-0 pb-3"},o.a.createElement("strong",{className:"d-block text-gray-dark"},o.a.createElement(b.a,{icon:v.u,className:"mr-2"}),"Excerpt"),o.a.createElement(f.a.Group,{controlId:"excerpt",className:"mb-0 mt-2"},o.a.createElement(f.a.Control,{type:"text",value:r||"",placeholder:"Enter excerpt",onChange:function(e){return O("excerpt",e)}})))),o.a.createElement("div",{className:"text-muted pt-3"},o.a.createElement("div",{className:"border-bottom mb-0 pb-3"},o.a.createElement("strong",{className:"d-block text-gray-dark"},o.a.createElement(b.a,{icon:v.g,className:"mr-2"}),"Enable Preview"),o.a.createElement(f.a.Group,{controlId:"isPreviewEnabled",className:"mb-0 mt-2 text-left"},o.a.createElement("label",{className:"switch"},o.a.createElement("input",{type:"checkbox",checked:s,onChange:function(e){return function(e,t){if(t.stopPropagation(),e){var n=t.target.checked;n!==N[e]&&C(Object(d.a)({},N,Object(u.a)({},e,n)))}}("isPreviewEnabled",e)}}),o.a.createElement("span",{className:"slider round"}))))),o.a.createElement("div",{className:"text-muted pt-3"},o.a.createElement("div",{className:"mb-0 pb-3"},o.a.createElement("strong",{className:"d-block text-gray-dark"},o.a.createElement(b.a,{icon:v.i,className:"mr-2"}),"Content"),o.a.createElement(f.a.Group,{controlId:"content",className:"mb-0 mt-2"},o.a.createElement(E.a,{apiKey:t,key:"form-wvgiwys",initialValue:c||"",init:{selector:"textarea",images_upload_handler:function(e,t,n){Object(h.b)(e,t,n)},height:500,menubar:!1,plugins:["advlist codesample autolink lists link image imagetools charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | formatselect | image | codesample | bold italic backcolor | \n             alignleft aligncenter alignright alignjustify | \n             bullist numlist outdent indent | removeformat | help",entity_encoding:"raw"},onEditorChange:function(e){return function(e,t){C(Object(d.a)({},N,Object(u.a)({},e,t)))}("content",e)}})))),o.a.createElement("div",{className:"pt-3"},"add"===n&&o.a.createElement(m.a,{type:"submit",variant:"success"},o.a.createElement(b.a,{icon:v.s,className:"mr-2"}),"Add Lesson"),"update"===n&&o.a.createElement(m.a,{type:"submit",variant:"success"},o.a.createElement(b.a,{icon:v.v,className:"mr-2"}),"Save Lesson")))))}())},y=n(266);var N=function(e){var t=e.lesson,n=e.onUpdate,c=e.deleteLesson,s=e.modules,i=t.title,l=t.slug,u=t.excerpt,d=t.content,f=t.lessonOrder,E=t.sectionId,h=t.isPreviewEnabled,N=t.id,C=Object(r.useState)(!1),O=Object(a.a)(C,2),k=O[0],x=O[1],j=Object(r.useState)(!1),w=Object(a.a)(j,2),L=w[0],I=w[1],S=function(){I(!L)},D=s.filter((function(e){return E===e.id})),P=D.length>0;return o.a.createElement("div",{className:"lesson-details"},o.a.createElement(y.a,{visible:L,onCancel:S,onOk:function(){c(N)},message:"Are you sure you want to delete this lesson?"}),o.a.createElement("div",{className:"text-right p-1"},o.a.createElement(m.a,{variant:"warning",className:"text-right",onClick:function(){x(!k)}},o.a.createElement(b.a,{icon:v.r,className:"mr-2"}),"Edit"),o.a.createElement(m.a,{variant:"danger",className:"text-right ml-2",onClick:S,disabled:L},o.a.createElement(b.a,{icon:v.z,className:"mr-2"}),"Delete")),k?o.a.createElement(g,{mode:"update",onUpdate:n,lesson:t,modules:s}):o.a.createElement(p.a,{className:"border-0"},o.a.createElement(p.a.Body,null,o.a.createElement("div",{className:"text-muted"},o.a.createElement("div",{className:"border-bottom mb-0 pb-3"},o.a.createElement("strong",{className:"d-block text-gray-dark"},o.a.createElement(b.a,{icon:v.b,className:"mr-2"}),"Title"),o.a.createElement("div",null,i||"Not specified"))),o.a.createElement("div",{className:"text-muted pt-3"},o.a.createElement("div",{className:"border-bottom mb-0 pb-3"},o.a.createElement("strong",{className:"d-block text-gray-dark"},o.a.createElement(b.a,{icon:v.h,className:"mr-2"}),"Module"),o.a.createElement("div",null,P?D[0].name:"Not specified"))),o.a.createElement("div",{className:"text-muted pt-3"},o.a.createElement("div",{className:"border-bottom mb-0 pb-3"},o.a.createElement("strong",{className:"d-block text-gray-dark"},o.a.createElement(b.a,{icon:v.o,className:"mr-2"}),"Lesson Order"),o.a.createElement("div",null,f))),o.a.createElement("div",{className:"text-muted pt-3"},o.a.createElement("div",{className:"border-bottom mb-0 pb-3"},o.a.createElement("strong",{className:"d-block text-gray-dark"},o.a.createElement(b.a,{icon:v.w,className:"mr-2"}),"Slug"),o.a.createElement("div",null,l||"Not specified"))),o.a.createElement("div",{className:"text-muted pt-3"},o.a.createElement("div",{className:"border-bottom mb-0 pb-3"},o.a.createElement("strong",{className:"d-block text-gray-dark"},o.a.createElement(b.a,{icon:v.u,className:"mr-2"}),"Excerpt"),o.a.createElement("div",null,u||"Not specified"))),o.a.createElement("div",{className:"text-muted pt-3"},o.a.createElement("div",{className:"border-bottom mb-0 pb-3"},o.a.createElement("strong",{className:"d-block text-gray-dark"},o.a.createElement(b.a,{icon:v.g,className:"mr-2"}),"Preview Enabled"),o.a.createElement("div",{className:"mt-1"},o.a.createElement("label",{className:"switch mb-0"},o.a.createElement("input",{type:"checkbox",checked:h,disabled:!0}),o.a.createElement("span",{className:"slider round"}))))),o.a.createElement("div",{className:"text-muted pt-3"},o.a.createElement("div",{className:"border-bottom mb-0 pb-3"},o.a.createElement("strong",{className:"d-block text-gray-dark"},o.a.createElement(b.a,{icon:v.i,className:"mr-2"}),"Content"),o.a.createElement("div",{id:"editor-disabled"},d?o.a.createElement("div",{className:"bg-dark p-3 mt-3 mb-0 text-white rounded lesson-content"},d):"Not specified"))))))};var C=function(e){var t=e.localCourseLessonsData,n=e.localCourseModulesData,a=e.tinyMceApiKey,r=e.addLesson,u=e.updateLesson,d=e.deleteLesson;return o.a.createElement("div",{id:"cfg_lessons",className:"page p-0"},o.a.createElement("div",{className:"p-3 bg-light"},o.a.createElement("h6",{className:"m-0"},"Lesson Count: ",o.a.createElement("b",null,t.length))),o.a.createElement("div",{className:"p-3"},o.a.createElement(c.a.Container,{id:"left-tabs-example",defaultActiveKey:"addNewLesson"},o.a.createElement(s.a,null,o.a.createElement(i.a,{xs:2,className:"d-md-none"},o.a.createElement(l.a,{className:"flex-column"},o.a.createElement(l.a.Item,null,o.a.createElement(l.a.Link,{eventKey:"addNewLesson",className:"ellipsis clamp-1"},o.a.createElement(m.a,{variant:"secondary"},"+"))),t.map((function(e){return o.a.createElement(l.a.Item,{key:"lesson-".concat(e.id)},o.a.createElement(l.a.Link,{eventKey:e.id},o.a.createElement(m.a,{variant:"secondary"},e.lessonOrder)))})))),o.a.createElement(i.a,{md:3,xl:2,className:"d-none d-md-block"},o.a.createElement(l.a,{variant:"pills",className:"flex-column"},o.a.createElement(l.a.Item,null,o.a.createElement(l.a.Link,{eventKey:"addNewLesson",className:"ellipsis clamp-1"},"Add new lesson")),t.map((function(e){return o.a.createElement(l.a.Item,{key:"lesson-".concat(e.id)},o.a.createElement(l.a.Link,{eventKey:e.id,className:"ellipsis clamp-2 position-relative"},"".concat(e.lessonOrder,". ").concat(e.title)))})))),o.a.createElement(i.a,{xs:9,xl:10},o.a.createElement(c.a.Content,null,o.a.createElement(c.a.Pane,{eventKey:"addNewLesson"},o.a.createElement(g,{mode:"add",onAdd:r,tinyMceApiKey:a,modules:n})),t.map((function(e){return o.a.createElement(c.a.Pane,{eventKey:e.id,key:"lesson-pane-".concat(e.id)},o.a.createElement(N,{key:"lesson-".concat(e.id),lesson:e,onUpdate:u,deleteLesson:d,modules:n}))}))))))))},O=n(192),k=n(53),x=(n(288),n(152));t.default=function(e){var t=Object(k.c)((function(e){return e.activeCourseLessons.data})),n=Object(k.c)((function(e){return e.activeCourseModules.data})),c=Object(k.c)((function(e){return e.app.tinyMceApiKey})),s=Object(k.b)(),i=Object(r.useState)([]),l=Object(a.a)(i,2),m=l[0],u=l[1],d=Object(r.useState)([]),p=Object(a.a)(d,2),f=p[0],b=p[1],E=Object(r.useState)(e.match.params.id),v=Object(a.a)(E,2),h=v[0],g=v[1],y=Object(r.useState)(!1),N=Object(a.a)(y,2),j=N[0],w=N[1];return Object(r.useEffect)((function(){w(!1),u(t)}),[t]),Object(r.useEffect)((function(){b(n)}),[n]),Object(r.useEffect)((function(){var t=e.match.params.id;g(t),s(O.a.loadLessons(t)),s(x.a.loadModules(t))}),[e.match.params.id]),o.a.createElement(C,{localCourseLessonsData:m,localCourseModulesData:f,isModified:j,tinyMceApiKey:c,addLesson:function(e){s(O.a.addNewLessonDetails(h,e))},updateLesson:function(e){s(O.a.saveLessonDetails(h,e))},deleteLesson:function(e){s(O.a.deleteLessonDetails(h,e))}})}}}]);
//# sourceMappingURL=7.7d8f635c.chunk.js.map