(this["webpackJsonpcourse-generator-ui"]=this["webpackJsonpcourse-generator-ui"]||[]).push([[6],{309:function(e,a,t){},310:function(e,a,t){},317:function(e,a,t){"use strict";t.r(a);var n=t(87),l=t(0),c=t.n(l),s=t(294),r=t(287),o=t(166),m=t(296),i=t(53),d=t(74),u=t(73),E=t(88),b=t(44),p=t(7),v=t(167),N=t(6),g=t(89);var f=function(e){var a=e.tinyMceApiKey,t=e.mode,s=e.lesson,r=e.onAdd,o=e.onUpdate,m=e.modules,f=void 0===m?[]:m,k=Object(l.useState)("add"===t?{title:"",slug:"",excerpt:"",content:"",sectionId:0===f.length?"":f[0].id,isPreviewEnabled:!1}:Object(u.a)({},s)),x=Object(n.a)(k,2),y=x[0],h=x[1],O=function(e,a){if(a.stopPropagation(),e){var t=a.target.value;t!==y[e]&&h(Object(u.a)({},y,Object(d.a)({},e,t)))}},j=function(e){e.preventDefault(),"add"===t&&r(y),"update"===t&&o(y)};return c.a.createElement("div",{className:"lesson-form"},function(){var e=y.title,n=y.slug,l=y.excerpt,s=y.content,r=y.isPreviewEnabled,o=y.sectionId;return c.a.createElement(b.a,{onSubmit:j},c.a.createElement(E.a,{className:"border-0"},c.a.createElement(E.a.Body,null,c.a.createElement("div",{className:"text-muted"},c.a.createElement("div",{className:"border-bottom mb-0 pb-3"},c.a.createElement("strong",{className:"d-block text-gray-dark"},c.a.createElement(p.a,{icon:N.b,className:"mr-2"}),"Title"),c.a.createElement(b.a.Group,{controlId:"title",className:"mb-0 mt-2"},c.a.createElement(b.a.Control,{type:"text",value:e||"",placeholder:"Enter title",onChange:function(e){return O("title",e)},required:!0})))),c.a.createElement("div",{className:"text-muted pt-3"},c.a.createElement("div",{className:"border-bottom mb-0 pb-3"},c.a.createElement("strong",{className:"d-block text-gray-dark"},c.a.createElement(p.a,{icon:N.h,className:"mr-2"}),"Module"),c.a.createElement(b.a.Group,{controlId:"sectionId",className:"mb-0 mt-2"},c.a.createElement(b.a.Control,{as:"select",value:o||"",onChange:function(e){return O("sectionId",e)},required:!0,custom:!0},c.a.createElement("option",{value:""},"Select a module"),f.map((function(e){return c.a.createElement("option",{key:e.id,value:e.id},e.name)})))))),c.a.createElement("div",{className:"text-muted pt-3"},c.a.createElement("div",{className:"border-bottom mb-0 pb-3"},c.a.createElement("strong",{className:"d-block text-gray-dark"},c.a.createElement(p.a,{icon:N.w,className:"mr-2"}),"Slug"),c.a.createElement(b.a.Group,{controlId:"slug",className:"mb-0 mt-2"},c.a.createElement(b.a.Control,{type:"text",value:n||"",placeholder:"Enter slug",onChange:function(e){return O("slug",e)},required:!0})))),c.a.createElement("div",{className:"text-muted pt-3"},c.a.createElement("div",{className:"border-bottom mb-0 pb-3"},c.a.createElement("strong",{className:"d-block text-gray-dark"},c.a.createElement(p.a,{icon:N.u,className:"mr-2"}),"Excerpt"),c.a.createElement(b.a.Group,{controlId:"excerpt",className:"mb-0 mt-2"},c.a.createElement(b.a.Control,{type:"text",value:l||"",placeholder:"Enter excerpt",onChange:function(e){return O("excerpt",e)}})))),c.a.createElement("div",{className:"text-muted pt-3"},c.a.createElement("div",{className:"border-bottom mb-0 pb-3"},c.a.createElement("strong",{className:"d-block text-gray-dark"},c.a.createElement(p.a,{icon:N.g,className:"mr-2"}),"Enable Preview"),c.a.createElement(b.a.Group,{controlId:"isPreviewEnabled",className:"mb-0 mt-2 text-left"},c.a.createElement("label",{className:"switch"},c.a.createElement("input",{type:"checkbox",checked:r,onChange:function(e){return function(e,a){if(a.stopPropagation(),e){var t=a.target.checked;t!==y[e]&&h(Object(u.a)({},y,Object(d.a)({},e,t)))}}("isPreviewEnabled",e)}}),c.a.createElement("span",{className:"slider round"}))))),c.a.createElement("div",{className:"text-muted pt-3"},c.a.createElement("div",{className:"mb-0 pb-3"},c.a.createElement("strong",{className:"d-block text-gray-dark"},c.a.createElement(p.a,{icon:N.i,className:"mr-2"}),"Content"),c.a.createElement(b.a.Group,{controlId:"content",className:"mb-0 mt-2"},c.a.createElement(v.a,{apiKey:a,key:"form-wvgiwys",initialValue:s||"",init:{selector:"textarea",images_upload_handler:function(e,a,t){Object(g.b)(e,a,t)},height:500,menubar:!1,plugins:["advlist codesample autolink lists link image imagetools charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | formatselect | image | codesample | bold italic backcolor | \n             alignleft aligncenter alignright alignjustify | \n             bullist numlist outdent indent | removeformat | help",entity_encoding:"raw"},onEditorChange:function(e){return function(e,a){h(Object(u.a)({},y,Object(d.a)({},e,a)))}("content",e)}})))),c.a.createElement("div",{className:"pt-3"},"add"===t&&c.a.createElement(i.a,{type:"submit",variant:"success"},c.a.createElement(p.a,{icon:N.s,className:"mr-2"}),"Add Lesson"),"update"===t&&c.a.createElement(i.a,{type:"submit",variant:"success"},c.a.createElement(p.a,{icon:N.v,className:"mr-2"}),"Save Lesson")))))}())},k=t(168);var x=function(e){var a=e.lesson,t=e.onUpdate,s=e.deleteLesson,r=e.modules,o=a.title,m=a.slug,d=a.excerpt,u=a.content,b=a.lessonOrder,v=a.sectionId,g=a.isPreviewEnabled,x=a.id,y=Object(l.useState)(!1),h=Object(n.a)(y,2),O=h[0],j=h[1],w=Object(l.useState)(!1),L=Object(n.a)(w,2),C=L[0],S=L[1],I=function(){S(!C)},M=r.filter((function(e){return v===e.id})),K=M.length>0;return c.a.createElement("div",{className:"lesson-details"},c.a.createElement(k.a,{visible:C,onCancel:I,onOk:function(){s(x)},message:"Are you sure you want to delete this lesson?"}),c.a.createElement("div",{className:"text-right p-1"},c.a.createElement(i.a,{variant:"warning",className:"text-right",onClick:function(){j(!O)}},c.a.createElement(p.a,{icon:N.r,className:"mr-2"}),"Edit"),c.a.createElement(i.a,{variant:"danger",className:"text-right ml-2",onClick:I,disabled:C},c.a.createElement(p.a,{icon:N.A,className:"mr-2"}),"Delete")),O?c.a.createElement(f,{mode:"update",onUpdate:t,lesson:a,modules:r}):c.a.createElement(E.a,{className:"border-0"},c.a.createElement(E.a.Body,null,c.a.createElement("div",{className:"text-muted"},c.a.createElement("div",{className:"border-bottom mb-0 pb-3"},c.a.createElement("strong",{className:"d-block text-gray-dark"},c.a.createElement(p.a,{icon:N.b,className:"mr-2"}),"Title"),c.a.createElement("div",null,o||"Not specified"))),c.a.createElement("div",{className:"text-muted pt-3"},c.a.createElement("div",{className:"border-bottom mb-0 pb-3"},c.a.createElement("strong",{className:"d-block text-gray-dark"},c.a.createElement(p.a,{icon:N.h,className:"mr-2"}),"Module"),c.a.createElement("div",null,K?M[0].name:"Not specified"))),c.a.createElement("div",{className:"text-muted pt-3"},c.a.createElement("div",{className:"border-bottom mb-0 pb-3"},c.a.createElement("strong",{className:"d-block text-gray-dark"},c.a.createElement(p.a,{icon:N.o,className:"mr-2"}),"Lesson Order"),c.a.createElement("div",null,b))),c.a.createElement("div",{className:"text-muted pt-3"},c.a.createElement("div",{className:"border-bottom mb-0 pb-3"},c.a.createElement("strong",{className:"d-block text-gray-dark"},c.a.createElement(p.a,{icon:N.w,className:"mr-2"}),"Slug"),c.a.createElement("div",null,m||"Not specified"))),c.a.createElement("div",{className:"text-muted pt-3"},c.a.createElement("div",{className:"border-bottom mb-0 pb-3"},c.a.createElement("strong",{className:"d-block text-gray-dark"},c.a.createElement(p.a,{icon:N.u,className:"mr-2"}),"Excerpt"),c.a.createElement("div",null,d||"Not specified"))),c.a.createElement("div",{className:"text-muted pt-3"},c.a.createElement("div",{className:"border-bottom mb-0 pb-3"},c.a.createElement("strong",{className:"d-block text-gray-dark"},c.a.createElement(p.a,{icon:N.g,className:"mr-2"}),"Preview Enabled"),c.a.createElement("div",{className:"mt-1"},c.a.createElement("label",{className:"switch mb-0"},c.a.createElement("input",{type:"checkbox",checked:g,disabled:!0}),c.a.createElement("span",{className:"slider round"}))))),c.a.createElement("div",{className:"text-muted pt-3"},c.a.createElement("div",{className:"border-bottom mb-0 pb-3"},c.a.createElement("strong",{className:"d-block text-gray-dark"},c.a.createElement(p.a,{icon:N.i,className:"mr-2"}),"Content"),c.a.createElement("div",{id:"editor-disabled"},u?c.a.createElement("div",{className:"bg-dark p-3 mt-3 mb-0 text-white rounded lesson-content"},u):"Not specified"))))))},y=t(79),h=t(313),O=t(308),j=t.n(O);t(309);var w=function(e){var a=e.visible,t=e.onOk,s=e.onCancel,r=e.lessons,o=void 0===r?[]:r,m=Object(l.useState)(o),d=Object(n.a)(m,2),u=d[0],E=d[1],b=Object(h.b)((function(e){var a=e.lesson,t=e.order;return c.a.createElement("div",{className:"font-weight-bold d-flex m-2 p-2 draggable-lesson-item align-items-center"},c.a.createElement("div",{className:"order mr-2"},t),c.a.createElement("div",null,a.title))})),p=Object(h.a)((function(e){var a=e.list;return c.a.createElement("div",null,a.map((function(e,a){return c.a.createElement(b,{key:"item-".concat(e.id),index:a,lesson:e,order:a+1})})))}));return Object(l.useEffect)((function(){E(o)}),[o]),c.a.createElement(y.a,{show:a,centered:!0,size:"lg",onHide:s,id:"cfg_lesson_order_modal"},c.a.createElement(y.a.Body,null,c.a.createElement(p,{list:u,onSortEnd:function(e){var a=e.oldIndex,t=e.newIndex;a!==t&&E(j()(u,a,t))}}),c.a.createElement("div",{className:"pt-3 text-right"},c.a.createElement(i.a,{variant:"success",className:"ml-2",onClick:function(e){e.stopPropagation(),t(u)}},"Save Sequence"),c.a.createElement(i.a,{variant:"light",className:"ml-2",onClick:s},"Cancel"))))};var L=function(e){var a=e.localCourseLessonsData,t=e.localCourseModulesData,n=e.tinyMceApiKey,l=e.addLesson,d=e.updateLesson,u=e.deleteLesson,E=e.orderModalOpen,b=e.toggleOrderingModal,p=e.updateLessonSequence;return c.a.createElement("div",{id:"cfg_lessons",className:"page p-0"},c.a.createElement(w,{visible:E,lessons:a,onOk:p,onCancel:b}),c.a.createElement("div",{className:"p-3 bg-light lessons-header"},c.a.createElement("div",{className:"lesson-count"},c.a.createElement("h6",{className:"m-0"},"Lesson Count: ",c.a.createElement("b",null,a.length))),c.a.createElement("div",{className:"lessons-action-panel"},c.a.createElement(i.a,{type:"submit",variant:"primary",className:"ml-2 float-right font-weight-bold",size:"sm",onClick:b},"Order Lessons"))),c.a.createElement("div",{className:"p-3"},c.a.createElement(s.a.Container,{id:"left-tabs-example",defaultActiveKey:"addNewLesson"},c.a.createElement(r.a,null,c.a.createElement(o.a,{xs:2,className:"d-md-none"},c.a.createElement(m.a,{className:"flex-column"},c.a.createElement(m.a.Item,null,c.a.createElement(m.a.Link,{eventKey:"addNewLesson",className:"ellipsis clamp-1"},c.a.createElement(i.a,{variant:"secondary"},"+"))),a.map((function(e){return c.a.createElement(m.a.Item,{key:"lesson-".concat(e.id)},c.a.createElement(m.a.Link,{eventKey:e.id},c.a.createElement(i.a,{variant:"secondary"},e.lessonOrder)))})))),c.a.createElement(o.a,{md:3,xl:2,className:"d-none d-md-block"},c.a.createElement(m.a,{variant:"pills",className:"flex-column"},c.a.createElement(m.a.Item,null,c.a.createElement(m.a.Link,{eventKey:"addNewLesson",className:"ellipsis clamp-1"},"Add new lesson")),a.map((function(e){return c.a.createElement(m.a.Item,{key:"lesson-".concat(e.id)},c.a.createElement(m.a.Link,{eventKey:e.id,className:"ellipsis clamp-2 position-relative"},"".concat(e.lessonOrder,". ").concat(e.title)))})))),c.a.createElement(o.a,{xs:9,xl:10},c.a.createElement(s.a.Content,null,c.a.createElement(s.a.Pane,{eventKey:"addNewLesson"},c.a.createElement(f,{mode:"add",onAdd:l,tinyMceApiKey:n,modules:t})),a.map((function(e){return c.a.createElement(s.a.Pane,{eventKey:e.id,key:"lesson-pane-".concat(e.id)},c.a.createElement(x,{key:"lesson-".concat(e.id),lesson:e,onUpdate:d,deleteLesson:u,modules:t}))}))))))))},C=t(215),S=t(35),I=(t(310),t(172));a.default=function(e){var a=Object(S.c)((function(e){return e.activeCourseLessons.data})),t=Object(S.c)((function(e){return e.activeCourseModules.data})),s=Object(S.c)((function(e){return e.app.tinyMceApiKey})),r=Object(S.b)(),o=Object(l.useState)([]),m=Object(n.a)(o,2),i=m[0],d=m[1],u=Object(l.useState)([]),E=Object(n.a)(u,2),b=E[0],p=E[1],v=Object(l.useState)(!1),N=Object(n.a)(v,2),g=N[0],f=N[1],k=Object(l.useState)(e.match.params.id),x=Object(n.a)(k,2),y=x[0],h=x[1],O=Object(l.useState)(!1),j=Object(n.a)(O,2),w=j[0],M=j[1];return Object(l.useEffect)((function(){M(!1),d(a)}),[a]),Object(l.useEffect)((function(){p(t)}),[t]),Object(l.useEffect)((function(){var a=e.match.params.id;h(a),r(C.a.loadLessons(a)),r(I.a.loadModules(a))}),[e.match.params.id]),c.a.createElement(L,{localCourseLessonsData:i,localCourseModulesData:b,isModified:w,tinyMceApiKey:s,orderModalOpen:g,updateLessonSequence:function(e){r(C.a.saveLessonSequenceDetails(y,e))},toggleOrderingModal:function(){f(!g)},addLesson:function(e){r(C.a.addNewLessonDetails(y,e))},updateLesson:function(e){r(C.a.saveLessonDetails(y,e))},deleteLesson:function(e){r(C.a.deleteLessonDetails(y,e))}})}}}]);
//# sourceMappingURL=6.99c18268.chunk.js.map